<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alumni Cup Admin Panel</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
    h1 { color: #bf5700; margin-bottom: 10px; }
    h2 { color: #00274c; margin: 30px 0 15px 0; border-bottom: 2px solid #eee; padding-bottom: 10px; }
    h3 { color: #333; margin: 20px 0 10px 0; }
    label { display: block; font-weight: bold; margin: 10px 0 5px 0; }
    input, textarea, select { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
    textarea { min-height: 100px; font-family: monospace; }
    button { background: #bf5700; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px 5px 5px 0; }
    button:hover { background: #a04900; }
    .btn-small { padding: 5px 10px; font-size: 0.9em; }
    .btn-green { background: #28a745; }
    .btn-green:hover { background: #218838; }
    .btn-blue { background: #007bff; }
    .btn-blue:hover { background: #0056b3; }
    .btn-red { background: #dc3545; }
    .btn-red:hover { background: #c82333; }
    .info-box { background: #e3f2fd; padding: 10px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #2196F3; font-size: 0.9em; }
    .code-box { background: #f5f5f5; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 0.85em; max-height: 400px; overflow-y: auto; white-space: pre-wrap; word-wrap: break-word; margin: 10px 0; display: none; border: 1px solid #ddd; }
    .success { background: #4CAF50; color: white; padding: 10px; border-radius: 5px; margin: 10px 0; display: none; }
    table { width: 100%; border-collapse: collapse; margin: 10px 0; background: white; }
    th { background: #bf5700; color: white; padding: 8px; text-align: left; }
    td { padding: 8px; border-bottom: 1px solid #eee; }
    td input { padding: 5px; }
    .photo-links { margin: 10px 0; }
    .photo-item { display: flex; gap: 10px; margin: 5px 0; }
    .photo-item input { flex: 1; }
    .preview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 10px; margin: 10px 0; }
    .preview-img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ† Alumni Cup Admin Panel</h1>
    <p>Manage your website content here</p>

    <!-- PHOTOS -->
    <h2>ğŸ“¸ Photo Gallery</h2>
    <div class="info-box">Upload photos to Google Drive, share with "Anyone with the link", paste links below</div>
    <div id="photoLinks" class="photo-links">
      <div class="photo-item">
        <input type="url" placeholder="https://drive.google.com/file/d/...">
        <button class="btn-small btn-red" onclick="removePhoto(this)">Remove</button>
      </div>
    </div>
    <button class="btn-green" onclick="addPhoto()">+ Add Photo</button>
    <button onclick="previewPhotos()">Preview</button>
    <button class="btn-blue" onclick="genPhoto()">Generate Code</button>
    <button onclick="copy('photoCode')">Copy</button>
    <div id="photoPreview" class="preview-grid"></div>
    <div id="photoCode" class="code-box"></div>
    <div id="photoMsg" class="success">Code generated!</div>

    <!-- RESULTS -->
    <h2>ğŸ† Results & Participants</h2>
    
    <h3>Golf</h3>
    <label>UT Austin Score</label>
    <input type="number" id="utGolf" value="312">
    <label>Michigan Score</label>
    <input type="number" id="umGolf" value="325">
    <label>Participants (CSV: Name, School, Score)</label>
    <div class="info-box">Example: John Smith, UT, 78</div>
    <textarea id="golfCSV" placeholder="John Smith, UT, 78
Jane Doe, Michigan, 82"></textarea>
    <button class="btn-green" onclick="parseTable('golfCSV', 'golfTable')">Parse CSV</button>
    <table id="golfTable">
      <thead><tr><th>Name</th><th>School</th><th>Score</th><th>Action</th></tr></thead>
      <tbody><tr><td><input type="text" placeholder="Name"></td><td><input type="text" placeholder="UT/Michigan"></td><td><input type="number" placeholder="78"></td><td><button class="btn-small btn-red" onclick="delRow(this)">Ã—</button></td></tr></tbody>
    </table>

    <h3>10K Run</h3>
    <label>UT Austin Avg Time</label>
    <input type="text" id="utRun" value="49:15">
    <label>Michigan Avg Time</label>
    <input type="text" id="umRun" value="48:23">
    <label>Participants (CSV: Name, School, Time)</label>
    <div class="info-box">Example: John Smith, UT, 48:23</div>
    <textarea id="runCSV" placeholder="John Smith, UT, 48:23
Jane Doe, Michigan, 52:15"></textarea>
    <button class="btn-green" onclick="parseTable('runCSV', 'runTable')">Parse CSV</button>
    <table id="runTable">
      <thead><tr><th>Name</th><th>School</th><th>Time</th><th>Action</th></tr></thead>
      <tbody><tr><td><input type="text" placeholder="Name"></td><td><input type="text" placeholder="UT/Michigan"></td><td><input type="text" placeholder="48:23"></td><td><button class="btn-small btn-red" onclick="delRow(this)">Ã—</button></td></tr></tbody>
    </table>

    <h3>Rules</h3>
    <label>Golf Rules (English)</label>
    <textarea id="golfEn">- USGA Rules apply
- Modified Stableford scoring
- Maximum handicap: 36</textarea>
    <label>Golf Rules (Korean)</label>
    <textarea id="golfKo">- USGA ê·œì¹™ ì ìš©
- ìˆ˜ì •ëœ ìŠ¤í…Œì´ë¸”í¬ë“œ ìŠ¤ì½”ì–´ë§
- ìµœëŒ€ í•¸ë””ìº¡: 36</textarea>
    <label>10K Rules (English)</label>
    <textarea id="runEn">- Chip-timed race
- USATF certified course
- Top 3 finishers per team count</textarea>
    <label>10K Rules (Korean)</label>
    <textarea id="runKo">- ì¹© íƒ€ì´ë° ë ˆì´ìŠ¤
- USATF ì¸ì¦ ì½”ìŠ¤
- íŒ€ ì ìˆ˜ëŠ” ìƒìœ„ 3ëª…ìœ¼ë¡œ ê³„ì‚°</textarea>

    <label>Total Participants</label>
    <input type="number" id="total" value="100">
    <label>Notes (optional)</label>
    <textarea id="notes" style="min-height: 60px;"></textarea>

    <button class="btn-blue" onclick="genResults()">Generate Results Code</button>
    <button onclick="copy('resultsCode')">Copy</button>
    <div id="resultsCode" class="code-box"></div>
    <div id="resultsMsg" class="success">Results code generated!</div>

    <!-- ANNOUNCEMENT -->
    <h2>ğŸ“¢ Announcement</h2>
    <label>English</label>
    <input type="text" id="annEn" value="ğŸ‰ Alumni Cup 2026 - Registration Opens March 2026">
    <label>Korean</label>
    <input type="text" id="annKo" value="ğŸ‰ ì•ŒëŸ¼ë‚˜ì´ ì»µ 2026 - ë“±ë¡ì€ 2026ë…„ 3ì›” ì‹œì‘">
    <button class="btn-blue" onclick="genAnn()">Generate Code</button>
    <button onclick="copy('annCode')">Copy</button>
    <div id="annCode" class="code-box"></div>
    <div id="annMsg" class="success">Announcement code generated!</div>
  </div>

  <script>
    // PHOTO FUNCTIONS
    function addPhoto() {
      const div = document.createElement('div');
      div.className = 'photo-item';
      div.innerHTML = '<input type="url" placeholder="https://drive.google.com/file/d/..."><button class="btn-small btn-red" onclick="removePhoto(this)">Remove</button>';
      document.getElementById('photoLinks').appendChild(div);
    }

    function removePhoto(btn) {
      if (document.getElementById('photoLinks').children.length > 1) {
        btn.parentElement.remove();
      }
    }

    function convertDriveLink(url) {
      if (!url) return null;
      const match = url.match(/\/file\/d\/([^\/]+)/);
      return match ? `https://drive.google.com/uc?export=view&id=${match[1]}` : url;
    }

    function previewPhotos() {
      const inputs = document.querySelectorAll('#photoLinks input');
      const preview = document.getElementById('photoPreview');
      preview.innerHTML = '';
      inputs.forEach(inp => {
        const url = convertDriveLink(inp.value);
        if (url) preview.innerHTML += `<img src="${url}" class="preview-img">`;
      });
    }

    function genPhoto() {
      const inputs = document.querySelectorAll('#photoLinks input');
      const urls = [];
      inputs.forEach(inp => {
        const url = convertDriveLink(inp.value);
        if (url) urls.push(url);
      });
      if (urls.length === 0) { alert('Add photos first!'); return; }
      
      let code = `<!-- Photo Gallery -->
<div style="margin-top: 3rem;">
  <h3 style="text-align: center; color: #00274c; font-size: 1.8rem; margin-bottom: 2rem;">
    <span class="lang-en">ğŸ“¸ 2025 Event Photos</span>
    <span class="lang-ko">ğŸ“¸ 2025 ëŒ€íšŒ ì‚¬ì§„</span>
  </h3>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
`;
      urls.forEach(u => code += `    <img src="${u}" alt="Alumni Cup 2025" style="width: 100%; height: 250px; object-fit: cover; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
`);
      code += `  </div>
</div>`;
      document.getElementById('photoCode').textContent = code;
      document.getElementById('photoCode').style.display = 'block';
      showMsg('photoMsg');
    }

    // TABLE FUNCTIONS
    function delRow(btn) {
      const tbody = btn.closest('tbody');
      if (tbody.rows.length > 1) btn.closest('tr').remove();
    }

    function parseTable(csvId, tableId) {
      const csv = document.getElementById(csvId).value.trim();
      if (!csv) { alert('Paste CSV first!'); return; }
      
      const tbody = document.getElementById(tableId).querySelector('tbody');
      tbody.innerHTML = '';
      
      csv.split('\n').forEach(line => {
        const parts = line.split(',').map(p => p.trim());
        if (parts.length >= 3) {
          const row = tbody.insertRow();
          const inputType = tableId === 'golfTable' ? 'number' : 'text';
          row.innerHTML = `<td><input type="text" value="${parts[0]}"></td><td><input type="text" value="${parts[1]}"></td><td><input type="${inputType}" value="${parts[2]}"></td><td><button class="btn-small btn-red" onclick="delRow(this)">Ã—</button></td>`;
        }
      });
      document.getElementById(csvId).value = '';
      alert('CSV parsed!');
    }

    function getTableData(tableId) {
      const rows = document.getElementById(tableId).querySelector('tbody').rows;
      const data = [];
      for (let r of rows) {
        const inputs = r.querySelectorAll('input');
        if (inputs[0].value && inputs[1].value && inputs[2].value) {
          data.push({name: inputs[0].value, school: inputs[1].value, score: inputs[2].value});
        }
      }
      return data;
    }

    // GENERATE RESULTS
    function genResults() {
      const utG = document.getElementById('utGolf').value;
      const umG = document.getElementById('umGolf').value;
      const utR = document.getElementById('utRun').value;
      const umR = document.getElementById('umRun').value;
      const tot = document.getElementById('total').value;
      const note = document.getElementById('notes').value;
      
      const golf = getTableData('golfTable');
      const run = getTableData('runTable');
      
      const golfEn = document.getElementById('golfEn').value;
      const golfKo = document.getElementById('golfKo').value;
      const runEn = document.getElementById('runEn').value;
      const runKo = document.getElementById('runKo').value;
      
      const gWin = parseInt(utG) < parseInt(umG);
      const rWin = umR < utR;
      
      const utGolf = golf.filter(p => p.school.toLowerCase().includes('ut'));
      const umGolf = golf.filter(p => p.school.toLowerCase().includes('mich'));
      const utRun = run.filter(p => p.school.toLowerCase().includes('ut'));
      const umRun = run.filter(p => p.school.toLowerCase().includes('mich'));
      
      let code = `<!-- Results Section -->
<section id="results">
  <h2 class="lang-en">2025 Inaugural Results</h2>
  <h2 class="lang-ko">2025 ì°½ë¦½ ëŒ€íšŒ ê²°ê³¼</h2>
  <p class="lang-en" style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">Ann Arbor, Michigan - September 2025</p>
  <p class="lang-ko" style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">ë¯¸ì‹œê°„ì£¼ ì•¤ì•„ë²„ - 2025ë…„ 9ì›”</p>
  
  <div class="results-box">
    <h3 class="lang-en">â›³ Golf Championship</h3>
    <h3 class="lang-ko">â›³ ê³¨í”„ ì±”í”¼ì–¸ì‹­</h3>
    <div class="result-row">
      <span class="school lang-en">${gWin ? 'ğŸ† ' : ''}University of Texas</span>
      <span class="school lang-ko">${gWin ? 'ğŸ† ' : ''}í…ì‚¬ìŠ¤ ëŒ€í•™êµ</span>
      <span class="score lang-en">Team Score: ${utG}</span>
      <span class="score lang-ko">íŒ€ ì ìˆ˜: ${utG}</span>
    </div>
    <div class="result-row">
      <span class="school lang-en">${!gWin ? 'ğŸ† ' : ''}University of Michigan</span>
      <span class="school lang-ko">${!gWin ? 'ğŸ† ' : ''}ë¯¸ì‹œê°„ ëŒ€í•™êµ</span>
      <span class="score lang-en">Team Score: ${umG}</span>
      <span class="score lang-ko">íŒ€ ì ìˆ˜: ${umG}</span>
    </div>
  </div>
  
  <div class="results-box">
    <h3 class="lang-en">ğŸƒ 10K Run Championship</h3>
    <h3 class="lang-ko">ğŸƒ 10K ë§ˆë¼í†¤ ì±”í”¼ì–¸ì‹­</h3>
    <div class="result-row">
      <span class="school lang-en">${rWin ? 'ğŸ† ' : ''}University of Michigan</span>
      <span class="school lang-ko">${rWin ? 'ğŸ† ' : ''}ë¯¸ì‹œê°„ ëŒ€í•™êµ</span>
      <span class="score lang-en">Avg Time: ${umR}</span>
      <span class="score lang-ko">í‰ê·  ê¸°ë¡: ${umR}</span>
    </div>
    <div class="result-row">
      <span class="school lang-en">${!rWin ? 'ğŸ† ' : ''}University of Texas</span>
      <span class="school lang-ko">${!rWin ? 'ğŸ† ' : ''}í…ì‚¬ìŠ¤ ëŒ€í•™êµ</span>
      <span class="score lang-en">Avg Time: ${utR}</span>
      <span class="score lang-ko">í‰ê·  ê¸°ë¡: ${utR}</span>
    </div>
  </div>
  
  <details style="margin-top: 2rem; background: #f9f9f9; padding: 1.5rem; border-radius: 10px;">
    <summary style="cursor: pointer; font-size: 1.2rem; font-weight: bold; color: #bf5700;">
      <span class="lang-en">ğŸ“Š View Detailed Results</span>
      <span class="lang-ko">ğŸ“Š ìƒì„¸ ê²°ê³¼ ë³´ê¸°</span>
    </summary>
    <div style="margin-top: 1.5rem; display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1rem;">
      <div style="background: white; padding: 1rem; border-radius: 8px;">
        <h5 style="color: #bf5700;">UT Austin Golf</h5>
        <table style="width: 100%;"><thead><tr><th class="lang-en">Name</th><th class="lang-ko">ì´ë¦„</th><th class="lang-en">Score</th><th class="lang-ko">ì ìˆ˜</th></tr></thead><tbody>`;
      
      utGolf.forEach(p => code += `<tr><td>${p.name}</td><td>${p.score}</td></tr>`);
      
      code += `</tbody></table>
      </div>
      <div style="background: white; padding: 1rem; border-radius: 8px;">
        <h5 style="color: #00274c;">Michigan Golf</h5>
        <table style="width: 100%;"><thead><tr><th class="lang-en">Name</th><th class="lang-ko">ì´ë¦„</th><th class="lang-en">Score</th><th class="lang-ko">ì ìˆ˜</th></tr></thead><tbody>`;
      
      umGolf.forEach(p => code += `<tr><td>${p.name}</td><td>${p.score}</td></tr>`);
      
      code += `</tbody></table>
      </div>
      <div style="background: white; padding: 1rem; border-radius: 8px;">
        <h5 style="color: #bf5700;">UT Austin 10K</h5>
        <table style="width: 100%;"><thead><tr><th class="lang-en">Name</th><th class="lang-ko">ì´ë¦„</th><th class="lang-en">Time</th><th class="lang-ko">ê¸°ë¡</th></tr></thead><tbody>`;
      
      utRun.forEach(p => code += `<tr><td>${p.name}</td><td>${p.score}</td></tr>`);
      
      code += `</tbody></table>
      </div>
      <div style="background: white; padding: 1rem; border-radius: 8px;">
        <h5 style="color: #00274c;">Michigan 10K</h5>
        <table style="width: 100%;"><thead><tr><th class="lang-en">Name</th><th class="lang-ko">ì´ë¦„</th><th class="lang-en">Time</th><th class="lang-ko">ê¸°ë¡</th></tr></thead><tbody>`;
      
      umRun.forEach(p => code += `<tr><td>${p.name}</td><td>${p.score}</td></tr>`);
      
      code += `</tbody></table>
      </div>
    </div>
  </details>
  
  <details style="margin-top: 1rem; background: #f9f9f9; padding: 1.5rem; border-radius: 10px;">
    <summary style="cursor: pointer; font-size: 1.2rem; font-weight: bold; color: #bf5700;">
      <span class="lang-en">ğŸ“‹ Rules</span>
      <span class="lang-ko">ğŸ“‹ ê·œì¹™</span>
    </summary>
    <div style="margin-top: 1rem;">
      <h4 class="lang-en">â›³ Golf Rules</h4>
      <h4 class="lang-ko">â›³ ê³¨í”„ ê·œì¹™</h4>
      <div class="lang-en" style="background: white; padding: 1rem; margin: 0.5rem 0; white-space: pre-line;">${golfEn}</div>
      <div class="lang-ko" style="background: white; padding: 1rem; margin: 0.5rem 0; white-space: pre-line;">${golfKo}</div>
      <h4 class="lang-en" style="margin-top: 1rem;">ğŸƒ 10K Rules</h4>
      <h4 class="lang-ko" style="margin-top: 1rem;">ğŸƒ 10K ê·œì¹™</h4>
      <div class="lang-en" style="background: white; padding: 1rem; margin: 0.5rem 0; white-space: pre-line;">${runEn}</div>
      <div class="lang-ko" style="background: white; padding: 1rem; margin: 0.5rem 0; white-space: pre-line;">${runKo}</div>
    </div>
  </details>
  
  <p class="lang-en" style="text-align: center; margin-top: 2rem; font-style: italic;">Over ${tot} alumni participated.${note ? ' ' + note : ''}</p>
  <p class="lang-ko" style="text-align: center; margin-top: 2rem; font-style: italic;">${tot}ëª… ì´ìƒì˜ ë™ë¬¸ì´ ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.${note ? ' ' + note : ''}</p>
</section>`;
      
      document.getElementById('resultsCode').textContent = code;
      document.getElementById('resultsCode').style.display = 'block';
      showMsg('resultsMsg');
    }

    // GENERATE ANNOUNCEMENT
    function genAnn() {
      const en = document.getElementById('annEn').value;
      const ko = document.getElementById('annKo').value;
      
      const code = `<!-- Announcement -->
<div class="announcement">
  <span class="lang-en">${en}</span>
  <span class="lang-ko">${ko}</span>
</div>`;
      
      document.getElementById('annCode').textContent = code;
      document.getElementById('annCode').style.display = 'block';
      showMsg('annMsg');
    }

    // UTILITIES
    function copy(id) {
      const text = document.getElementById(id).textContent;
      if (!text) { alert('Generate code first!'); return; }
      navigator.clipboard.writeText(text).then(() => alert('âœ… Copied!'));
    }

    function showMsg(id) {
      const el = document.getElementById(id);
      el.style.display = 'block';
      setTimeout(() => el.style.display = 'none', 3000);
    }
  </script>
</body>
</html>
