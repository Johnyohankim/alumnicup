<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alumni Cup - Admin Panel</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f5f5;
      padding: 2rem;
    }
    
    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    h1 {
      color: #bf5700;
      margin-bottom: 0.5rem;
    }
    
    .subtitle {
      color: #666;
      margin-bottom: 2rem;
    }
    
    .section {
      margin-bottom: 3rem;
      padding-bottom: 2rem;
      border-bottom: 2px solid #eee;
    }
    
    .section:last-child {
      border-bottom: none;
    }
    
    h2 {
      color: #00274c;
      margin-bottom: 1.5rem;
      font-size: 1.5rem;
    }
    
    .form-group {
      margin-bottom: 1.5rem;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: bold;
      color: #333;
    }
    
    input[type="text"],
    input[type="number"],
    input[type="url"],
    textarea,
    select {
      width: 100%;
      padding: 0.8rem;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 1rem;
    }
    
    textarea {
      min-height: 150px;
      resize: vertical;
      font-family: monospace;
    }
    
    .photo-links {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    
    .photo-link-item {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    
    .photo-link-item input {
      flex: 1;
    }
    
    .photo-link-item button {
      background: #dc3545;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }
    
    .add-link-btn {
      background: #28a745;
      padding: 0.5rem 1rem;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
    
    .photo-preview {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .photo-item {
      position: relative;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    
    .photo-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
    }
    
    button {
      background: #bf5700;
      color: white;
      padding: 1rem 2rem;
      border: none;
      border-radius: 5px;
      font-size: 1rem;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s;
    }
    
    button:hover {
      background: #a04900;
    }
    
    .button-group {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    
    .success-message {
      background: #4CAF50;
      color: white;
      padding: 1rem;
      border-radius: 5px;
      margin-top: 1rem;
      display: none;
    }
    
    .info-box {
      background: #e3f2fd;
      padding: 1rem;
      border-radius: 5px;
      margin-bottom: 1rem;
      border-left: 4px solid #2196F3;
    }
    
    .warning-box {
      background: #fff3cd;
      padding: 1rem;
      border-radius: 5px;
      margin-bottom: 1rem;
      border-left: 4px solid #ffc107;
    }
    
    .code-output {
      background: #f5f5f5;
      padding: 1rem;
      border-radius: 5px;
      font-family: monospace;
      font-size: 0.9rem;
      margin-top: 1rem;
      max-height: 400px;
      overflow-y: auto;
      border: 1px solid #ddd;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    
    .copy-button {
      background: #00274c;
      padding: 0.5rem 1rem;
      font-size: 0.9rem;
    }
    
    .example {
      background: #f8f9fa;
      padding: 0.5rem;
      border-radius: 3px;
      font-family: monospace;
      font-size: 0.85rem;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ† Alumni Cup Admin Panel</h1>
    <p class="subtitle">Manage photos and event information</p>

    <!-- Photo Gallery Section -->
    <div class="section">
      <h2>ğŸ“¸ Google Drive Photo Gallery</h2>
      <div class="info-box">
        <strong>How to use Google Drive photos:</strong><br>
        1. Upload photos to Google Drive<br>
        2. Right-click â†’ Share â†’ "Anyone with the link" (Viewer access)<br>
        3. Copy the share link<br>
        4. Paste it below (the tool will auto-convert it!)
      </div>
      
      <div class="form-group">
        <label>Google Drive Photo Links</label>
        <div class="warning-box" style="font-size: 0.9rem;">
          Paste your Google Drive share links below. Example:<br>
          <span class="example">https://drive.google.com/file/d/1ABC123xyz/view?usp=sharing</span>
        </div>
        <div id="photoLinksContainer" class="photo-links">
          <div class="photo-link-item">
            <input type="url" placeholder="Paste Google Drive share link here" class="photo-link-input">
            <button onclick="removePhotoLink(this)">Remove</button>
          </div>
        </div>
        <button class="add-link-btn" onclick="addPhotoLink()">+ Add Another Photo</button>
      </div>
      
      <div class="button-group">
        <button onclick="previewPhotos()">Preview Photos</button>
        <button onclick="generatePhotoCode()">Generate Photo Gallery Code</button>
        <button class="copy-button" onclick="copyCode('photoCodeOutput')">Copy Code</button>
      </div>
      
      <div class="photo-preview" id="photoPreview"></div>
      
      <div class="code-output" id="photoCodeOutput" style="display: none;"></div>
      <div class="success-message" id="photoSuccess">Photo code generated! Copy and paste into your HTML.</div>
    </div>

    <!-- 2025 Results Section -->
    <div class="section">
      <h2>ğŸ† 2025 Results Update</h2>
      
      <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">Golf Results</h3>
      <div class="form-group">
        <label>UT Austin Golf Score</label>
        <input type="number" id="utGolfScore" value="312">
      </div>
      <div class="form-group">
        <label>Michigan Golf Score</label>
        <input type="number" id="umGolfScore" value="325">
      </div>
      
      <h3 style="margin-top: 1.5rem; margin-bottom: 1rem;">10K Run Results</h3>
      <div class="form-group">
        <label>UT Austin Average Time (mm:ss)</label>
        <input type="text" id="ut10kTime" value="49:15" placeholder="48:23">
      </div>
      <div class="form-group">
        <label>Michigan Average Time (mm:ss)</label>
        <input type="text" id="um10kTime" value="48:23" placeholder="49:15">
      </div>
      
      <div class="form-group">
        <label>Total Participants</label>
        <input type="number" id="totalParticipants" value="100">
      </div>
      
      <div class="form-group">
        <label>Additional Notes (optional)</label>
        <textarea id="resultNotes" placeholder="Any special highlights or notes about the 2025 event..." style="min-height: 80px;"></textarea>
      </div>
      
      <div class="button-group">
        <button onclick="generateResultsCode()">Generate Results Code</button>
        <button class="copy-button" onclick="copyCode('resultsCodeOutput')">Copy Code</button>
      </div>
      
      <div class="code-output" id="resultsCodeOutput" style="display: none;"></div>
      <div class="success-message" id="resultsSuccess">Results code generated!</div>
    </div>

    <!-- Event Announcement Section -->
    <div class="section">
      <h2>ğŸ“¢ Update Announcement Banner</h2>
      
      <div class="form-group">
        <label>Announcement Text (English)</label>
        <input type="text" id="announcementEn" value="ğŸ‰ Alumni Cup 2026 - Expanding to 4 Schools! Registration Opens March 2026">
      </div>
      
      <div class="form-group">
        <label>Announcement Text (Korean)</label>
        <input type="text" id="announcementKo" value="ğŸ‰ ì•ŒëŸ¼ë‚˜ì´ ì»µ 2026 - 4ê°œ ëŒ€í•™ìœ¼ë¡œ í™•ëŒ€! ë“±ë¡ì€ 2026ë…„ 3ì›” ì‹œì‘">
      </div>
      
      <div class="button-group">
        <button onclick="generateAnnouncementCode()">Generate Announcement Code</button>
        <button class="copy-button" onclick="copyCode('announcementCodeOutput')">Copy Code</button>
      </div>
      
      <div class="code-output" id="announcementCodeOutput" style="display: none;"></div>
      <div class="success-message" id="announcementSuccess">Announcement code generated!</div>
    </div>

    <!-- Instructions -->
    <div class="section">
      <h2>ğŸ“ How to Update Your Website</h2>
      <ol style="line-height: 2; margin-left: 1.5rem;">
        <li><strong>For Photos:</strong> Paste Google Drive links, click "Generate Photo Gallery Code", copy the code</li>
        <li>Go to your GitHub repository: <code>https://github.com/johnyohankim/alumnicup</code></li>
        <li>Click on <code>index.html</code></li>
        <li>Click the pencil icon (Edit this file)</li>
        <li>Find the section you want to update (use Ctrl+F to search)</li>
        <li>Replace the old code with your new generated code</li>
        <li>Scroll down and click "Commit changes"</li>
        <li>Wait 2-3 minutes and refresh winalumnicup.com to see changes!</li>
      </ol>
      
      <div class="info-box" style="margin-top: 1rem;">
        <strong>Tip:</strong> Look for comments in the generated code like <code>&lt;!-- Photo Gallery Section --&gt;</code> to know exactly where to paste!
      </div>
    </div>
  </div>

  <script>
    function addPhotoLink() {
      const container = document.getElementById('photoLinksContainer');
      const newItem = document.createElement('div');
      newItem.className = 'photo-link-item';
      newItem.innerHTML = `
        <input type="url" placeholder="Paste Google Drive share link here" class="photo-link-input">
        <button onclick="removePhotoLink(this)">Remove</button>
      `;
      container.appendChild(newItem);
    }

    function removePhotoLink(button) {
      const container = document.getElementById('photoLinksContainer');
      if (container.children.length > 1) {
        button.parentElement.remove();
      } else {
        alert('You must have at least one photo link field!');
      }
    }

    function convertGoogleDriveLink(url) {
      if (!url || url.trim() === '') return null;
      
      // Extract file ID from various Google Drive URL formats
      let fileId = null;
      
      // Format: https://drive.google.com/file/d/FILE_ID/view
      const match1 = url.match(/\/file\/d\/([^\/]+)/);
      if (match1) {
        fileId = match1[1];
      }
      
      // Format: https://drive.google.com/open?id=FILE_ID
      const match2 = url.match(/[?&]id=([^&]+)/);
      if (match2) {
        fileId = match2[1];
      }
      
      if (fileId) {
        return `https://drive.google.com/uc?export=view&id=${fileId}`;
      }
      
      // If already in correct format or other URL, return as is
      return url;
    }

    function previewPhotos() {
      const inputs = document.querySelectorAll('.photo-link-input');
      const preview = document.getElementById('photoPreview');
      preview.innerHTML = '';
      
      let hasPhotos = false;
      inputs.forEach(input => {
        const url = convertGoogleDriveLink(input.value);
        if (url) {
          hasPhotos = true;
          const div = document.createElement('div');
          div.className = 'photo-item';
          div.innerHTML = `<img src="${url}" alt="Event Photo" onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%22150%22 height=%22150%22><rect fill=%22%23ddd%22 width=%22150%22 height=%22150%22/><text x=%2250%%22 y=%2250%%22 text-anchor=%22middle%22 dy=%22.3em%22 fill=%22%23999%22>Invalid Link</text></svg>'">`;
          preview.appendChild(div);
        }
      });
      
      if (!hasPhotos) {
        alert('Please add at least one Google Drive photo link!');
      }
    }

    function generatePhotoCode() {
      const inputs = document.querySelectorAll('.photo-link-input');
      const photoUrls = [];
      
      inputs.forEach(input => {
        const url = convertGoogleDriveLink(input.value);
        if (url) {
          photoUrls.push(url);
        }
      });
      
      if (photoUrls.length === 0) {
        alert('Please add at least one Google Drive photo link!');
        return;
      }
      
      let code = `<!-- Photo Gallery Section - Insert this AFTER the results section in index.html -->
<div style="margin-top: 3rem;">
  <h3 style="text-align: center; color: #00274c; font-size: 1.8rem; margin-bottom: 2rem;">
    <span class="lang-en">ğŸ“¸ 2025 Event Photos</span>
    <span class="lang-ko">ğŸ“¸ 2025 ëŒ€íšŒ ì‚¬ì§„</span>
  </h3>
  <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem; margin-top: 2rem;">
`;

      photoUrls.forEach(url => {
        code += `    <img src="${url}" alt="Alumni Cup 2025" style="width: 100%; height: 250px; object-fit: cover; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);" loading="lazy">
`;
      });

      code += `  </div>
</div>
<!-- End Photo Gallery Section -->`;

      document.getElementById('photoCodeOutput').textContent = code;
      document.getElementById('photoCodeOutput').style.display = 'block';
      showSuccess('photoSuccess');
    }

    function generateResultsCode() {
      const utGolf = document.getElementById('utGolfScore').value;
      const umGolf = document.getElementById('umGolfScore').value;
      const ut10k = document.getElementById('ut10kTime').value;
      const um10k = document.getElementById('um10kTime').value;
      const participants = document.getElementById('totalParticipants').value;
      const notes = document.getElementById('resultNotes').value;
      
      const golfWinnerUT = parseInt(utGolf) < parseInt(umGolf);
      const runWinnerUM = um10k < ut10k;
      
      let code = `<!-- Results Section - Replace the entire <section id="results"> in index.html -->
<section id="results">
  <h2 class="lang-en">2025 Inaugural Results</h2>
  <h2 class="lang-ko">2025 ì°½ë¦½ ëŒ€íšŒ ê²°ê³¼</h2>
  <p class="lang-en" style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">
    Ann Arbor, Michigan - September 2025
  </p>
  <p class="lang-ko" style="text-align: center; font-size: 1.1rem; margin-bottom: 2rem;">
    ë¯¸ì‹œê°„ì£¼ ì•¤ì•„ë²„ - 2025ë…„ 9ì›”
  </p>
  
  <div class="results-box">
    <h3 class="lang-en">â›³ Golf Championship</h3>
    <h3 class="lang-ko">â›³ ê³¨í”„ ì±”í”¼ì–¸ì‹­</h3>
    <div class="result-row">
      <span class="school lang-en">${golfWinnerUT ? 'ğŸ† ' : ''}University of Texas</span>
      <span class="school lang-ko">${golfWinnerUT ? 'ğŸ† ' : ''}í…ì‚¬ìŠ¤ ëŒ€í•™êµ</span>
      <span class="score lang-en">Team Score: ${utGolf}</span>
      <span class="score lang-ko">íŒ€ ì ìˆ˜: ${utGolf}</span>
    </div>
    <div class="result-row">
      <span class="school lang-en">${!golfWinnerUT ? 'ğŸ† ' : ''}University of Michigan</span>
      <span class="school lang-ko">${!golfWinnerUT ? 'ğŸ† ' : ''}ë¯¸ì‹œê°„ ëŒ€í•™êµ</span>
      <span class="score lang-en">Team Score: ${umGolf}</span>
      <span class="score lang-ko">íŒ€ ì ìˆ˜: ${umGolf}</span>
    </div>
  </div>
  
  <div class="results-box">
    <h3 class="lang-en">ğŸƒ 10K Run Championship</h3>
    <h3 class="lang-ko">ğŸƒ 10K ë§ˆë¼í†¤ ì±”í”¼ì–¸ì‹­</h3>
    <div class="result-row">
      <span class="school lang-en">${runWinnerUM ? 'ğŸ† ' : ''}University of Michigan</span>
      <span class="school lang-ko">${runWinnerUM ? 'ğŸ† ' : ''}ë¯¸ì‹œê°„ ëŒ€í•™êµ</span>
      <span class="score lang-en">Avg Time: ${um10k}</span>
      <span class="score lang-ko">í‰ê·  ê¸°ë¡: ${um10k}</span>
    </div>
    <div class="result-row">
      <span class="school lang-en">${!runWinnerUM ? 'ğŸ† ' : ''}University of Texas</span>
      <span class="school lang-ko">${!runWinnerUM ? 'ğŸ† ' : ''}í…ì‚¬ìŠ¤ ëŒ€í•™êµ</span>
      <span class="score lang-en">Avg Time: ${ut10k}</span>
      <span class="score lang-ko">í‰ê·  ê¸°ë¡: ${ut10k}</span>
    </div>
  </div>
  
  <p class="lang-en" style="text-align: center; margin-top: 2rem; font-style: italic;">
    Over ${participants} alumni participated in the inaugural event.${notes ? ' ' + notes : ''}
  </p>
  <p class="lang-ko" style="text-align: center; margin-top: 2rem; font-style: italic;">
    ì°½ë¦½ ëŒ€íšŒì— ${participants}ëª… ì´ìƒì˜ ë™ë¬¸ì´ ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.${notes ? ' ' + notes : ''}
  </p>
</section>
<!-- End Results Section -->`;

      document.getElementById('resultsCodeOutput').textContent = code;
      document.getElementById('resultsCodeOutput').style.display = 'block';
      showSuccess('resultsSuccess');
    }

    function generateAnnouncementCode() {
      const en = document.getElementById('announcementEn').value;
      const ko = document.getElementById('announcementKo').value;
      
      let code = `<!-- Announcement Banner - Replace the <div class="announcement"> section in index.html -->
<div class="announcement">
  <span class="lang-en">${en}</span>
  <span class="lang-ko">${ko}</span>
</div>
<!-- End Announcement Banner -->`;

      document.getElementById('announcementCodeOutput').textContent = code;
      document.getElementById('announcementCodeOutput').style.display = 'block';
      showSuccess('announcementSuccess');
    }

    function copyCode(outputId) {
      const code = document.getElementById(outputId).textContent;
      if (!code || code.trim() === '') {
        alert('Please generate the code first!');
        return;
      }
      navigator.clipboard.writeText(code).then(() => {
        alert('âœ… Code copied to clipboard! Now paste it into your index.html on GitHub.');
      }).catch(() => {
        alert('Copy failed. Please manually select and copy the code.');
      });
    }

    function showSuccess(id) {
      const el = document.getElementById(id);
      el.style.display = 'block';
      setTimeout(() => {
        el.style.display = 'none';
      }, 3000);
    }
  </script>
</body>
</html>
