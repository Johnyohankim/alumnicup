<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Alumni Cup Admin</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 1000px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; }
    h1 { color: #bf5700; margin-bottom: 10px; }
    h2 { color: #00274c; margin: 40px 0 20px 0; padding: 15px; background: #f9f9f9; border-left: 5px solid #bf5700; }
    h3 { color: #333; margin: 20px 0 10px 0; }
    label { display: block; font-weight: bold; margin: 10px 0 5px 0; }
    input, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 5px; }
    textarea { min-height: 100px; font-family: monospace; }
    button { background: #bf5700; color: white; padding: 12px 24px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px 10px 0; font-weight: bold; }
    button:hover { background: #a04900; }
    .btn-sm { padding: 5px 10px; font-size: 0.9em; }
    .btn-green { background: #28a745; }
    .btn-blue { background: #007bff; }
    .btn-red { background: #dc3545; }
    .info { background: #e3f2fd; padding: 12px; border-radius: 5px; margin: 10px 0; border-left: 4px solid #2196F3; font-size: 0.9em; }
    .inst { background: #fff3cd; padding: 15px; border-radius: 5px; margin: 15px 0; border-left: 4px solid #ffc107; }
    .inst h4 { color: #856404; margin-bottom: 10px; }
    .inst ol { margin-left: 20px; line-height: 1.8; }
    .inst code { background: #f8f9fa; padding: 2px 6px; border-radius: 3px; color: #d63384; }
    .code { background: #f5f5f5; padding: 15px; border-radius: 5px; font-family: monospace; font-size: 0.85em; max-height: 400px; overflow-y: auto; white-space: pre-wrap; margin: 10px 0; display: none; border: 1px solid #ddd; }
    .success { background: #4CAF50; color: white; padding: 10px; border-radius: 5px; margin: 10px 0; display: none; }
    table { width: 100%; border-collapse: collapse; margin: 10px 0; }
    th { background: #bf5700; color: white; padding: 8px; }
    td { padding: 8px; border-bottom: 1px solid #eee; }
    td input { padding: 5px; }
    .divider { border-top: 3px solid #bf5700; margin: 40px 0; }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ† Alumni Cup Admin</h1>
    <p style="color: #666; margin-bottom: 20px;">Generate code for each section independently</p>

    <!-- PHOTOS -->
    <h2>1ï¸âƒ£ Photos</h2>
    <div class="info">Upload images to your GitHub repo and enter filenames (e.g., trophy.jpg)</div>
    <div id="photos"></div>
    <button class="btn-green" onclick="addPhoto()">+ Add Photo</button>
    <button class="btn-blue" onclick="genPhoto()">Generate Photo Code</button>
    <button onclick="copy('photoCode')">Copy</button>
    <div class="inst">
      <h4>ğŸ“ Where to paste:</h4>
      <ol>
        <li>Find <code>&lt;/section&gt;</code> (end of Results section)</li>
        <li>Paste RIGHT AFTER it, BEFORE <code>&lt;/div&gt;</code></li>
      </ol>
    </div>
    <div id="photoCode" class="code"></div>
    <div id="photoMsg" class="success">âœ… Generated!</div>

    <div class="divider"></div>

    <!-- RESULTS -->
    <h2>2ï¸âƒ£ Results Summary</h2>
    <h3>Golf</h3>
    <label>UT Score</label>
    <input type="number" id="utGolf" value="312">
    <label>Michigan Score</label>
    <input type="number" id="umGolf" value="325">
    <h3>10K Run</h3>
    <label>UT Time</label>
    <input type="text" id="utRun" value="49:15">
    <label>Michigan Time</label>
    <input type="text" id="umRun" value="48:23">
    <label>Total Participants</label>
    <input type="number" id="total" value="100">
    <label>Notes</label>
    <textarea id="notes" style="min-height: 60px;"></textarea>
    <button class="btn-blue" onclick="genResults()">Generate Results Code</button>
    <button onclick="copy('resultsCode')">Copy</button>
    <div class="inst">
      <h4>ğŸ“ Where to paste:</h4>
      <ol>
        <li>Find <code>&lt;section id="results"&gt;</code></li>
        <li>REPLACE entire section to closing <code>&lt;/section&gt;</code></li>
      </ol>
    </div>
    <div id="resultsCode" class="code"></div>
    <div id="resultsMsg" class="success">âœ… Generated!</div>

    <div class="divider"></div>

    <!-- PARTICIPANTS -->
    <h2>3ï¸âƒ£ Participants</h2>
    <h3>Golf</h3>
    <div class="info">CSV: Name, School, Score</div>
    <textarea id="golfCSV" placeholder="John Smith, UT, 78"></textarea>
    <button class="btn-green" onclick="parseCSV('golfCSV','golfTable')">Parse CSV</button>
    <table id="golfTable">
      <thead><tr><th>Name</th><th>School</th><th>Score</th><th></th></tr></thead>
      <tbody><tr><td><input type="text"></td><td><input type="text"></td><td><input type="number"></td><td><button class="btn-sm btn-red" onclick="delRow(this)">Ã—</button></td></tr></tbody>
    </table>
    <h3>10K Run</h3>
    <div class="info">CSV: Name, School, Time</div>
    <textarea id="runCSV" placeholder="Jane Doe, Michigan, 48:23"></textarea>
    <button class="btn-green" onclick="parseCSV('runCSV','runTable')">Parse CSV</button>
    <table id="runTable">
      <thead><tr><th>Name</th><th>School</th><th>Time</th><th></th></tr></thead>
      <tbody><tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td><button class="btn-sm btn-red" onclick="delRow(this)">Ã—</button></td></tr></tbody>
    </table>
    <button class="btn-blue" onclick="genPart()">Generate Participants Code</button>
    <button onclick="copy('partCode')">Copy</button>
    <div class="inst">
      <h4>ğŸ“ Where to paste:</h4>
      <ol>
        <li>Inside the results section you just pasted</li>
        <li>Find comment: <code>&lt;!-- Participant details --&gt;</code></li>
        <li>Replace that line with this code</li>
      </ol>
    </div>
    <div id="partCode" class="code"></div>
    <div id="partMsg" class="success">âœ… Generated!</div>

    <div class="divider"></div>

    <!-- RULES -->
    <h2>4ï¸âƒ£ Rules</h2>
    <label>Golf (English)</label>
    <textarea id="golfEn">- USGA Rules apply
- Modified Stableford scoring</textarea>
    <label>Golf (Korean)</label>
    <textarea id="golfKo">- USGA ê·œì¹™ ì ìš©
- ìˆ˜ì •ëœ ìŠ¤í…Œì´ë¸”í¬ë“œ ìŠ¤ì½”ì–´ë§</textarea>
    <label>10K (English)</label>
    <textarea id="runEn">- Chip-timed race
- USATF certified course</textarea>
    <label>10K (Korean)</label>
    <textarea id="runKo">- ì¹© íƒ€ì´ë° ë ˆì´ìŠ¤
- USATF ì¸ì¦ ì½”ìŠ¤</textarea>
    <button class="btn-blue" onclick="genRules()">Generate Rules Code</button>
    <button onclick="copy('rulesCode')">Copy</button>
    <div class="inst">
      <h4>ğŸ“ Where to paste:</h4>
      <ol>
        <li>Inside results section</li>
        <li>Find comment: <code>&lt;!-- Rules --&gt;</code></li>
        <li>Replace that line with this code</li>
      </ol>
    </div>
    <div id="rulesCode" class="code"></div>
    <div id="rulesMsg" class="success">âœ… Generated!</div>

    <div class="divider"></div>

    <!-- ANNOUNCEMENT -->
    <h2>5ï¸âƒ£ Announcement</h2>
    <label>English</label>
    <input type="text" id="annEn" value="ğŸ‰ Alumni Cup 2026">
    <label>Korean</label>
    <input type="text" id="annKo" value="ğŸ‰ ì•ŒëŸ¼ë‚˜ì´ ì»µ 2026">
    <button class="btn-blue" onclick="genAnn()">Generate Code</button>
    <button onclick="copy('annCode')">Copy</button>
    <div class="inst">
      <h4>ğŸ“ Where to paste:</h4>
      <ol>
        <li>Find <code>&lt;div class="announcement"&gt;</code></li>
        <li>REPLACE entire div</li>
      </ol>
    </div>
    <div id="annCode" class="code"></div>
    <div id="annMsg" class="success">âœ… Generated!</div>
  </div>

  <script>
    // Init photos
    document.getElementById('photos').innerHTML = '<div style="margin:5px 0"><input type="text" placeholder="photo.jpg" style="width:80%; margin-right:10px"><button class="btn-sm btn-red" onclick="this.parentElement.remove()">Remove</button></div>';

    function addPhoto() {
      document.getElementById('photos').innerHTML += '<div style="margin:5px 0"><input type="text" placeholder="photo.jpg" style="width:80%; margin-right:10px"><button class="btn-sm btn-red" onclick="this.parentElement.remove()">Remove</button></div>';
    }

    function genPhoto() {
      const inputs = document.querySelectorAll('#photos input');
      const imgs = [];
      inputs.forEach(i => { if(i.value.trim()) imgs.push(i.value.trim()); });
      if(imgs.length === 0) { alert('Add photos!'); return; }
      
      let c = '<!-- Photos - Paste after </section> -->\n<div style="margin-top:3rem">\n  <h3 style="text-align:center;color:#00274c;font-size:1.8rem;margin-bottom:2rem">\n    <span class="lang-en">ğŸ“¸ 2025 Photos</span>\n    <span class="lang-ko">ğŸ“¸ 2025 ì‚¬ì§„</span>\n  </h3>\n  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1rem">\n';
      imgs.forEach(img => c += `    <img src="${img}" alt="Event" style="width:100%;height:250px;object-fit:cover;border-radius:10px;box-shadow:0 4px 6px rgba(0,0,0,0.1)">\n`);
      c += '  </div>\n</div>';
      
      show('photoCode', c, 'photoMsg');
    }

    function genResults() {
      const utG = document.getElementById('utGolf').value;
      const umG = document.getElementById('umGolf').value;
      const utR = document.getElementById('utRun').value;
      const umR = document.getElementById('umRun').value;
      const tot = document.getElementById('total').value;
      const note = document.getElementById('notes').value;
      const gWin = parseInt(utG) < parseInt(umG);
      const rWin = umR < utR;
      
      let c = `<!-- Results Section -->\n<section id="results">\n  <h2 class="lang-en">2025 Results</h2>\n  <h2 class="lang-ko">2025 ê²°ê³¼</h2>\n  <p class="lang-en" style="text-align:center;font-size:1.1rem;margin-bottom:2rem">Ann Arbor, Michigan - September 2025</p>\n  <p class="lang-ko" style="text-align:center;font-size:1.1rem;margin-bottom:2rem">ë¯¸ì‹œê°„ì£¼ ì•¤ì•„ë²„ - 2025ë…„ 9ì›”</p>\n  \n  <div class="results-box">\n    <h3 class="lang-en">â›³ Golf</h3>\n    <h3 class="lang-ko">â›³ ê³¨í”„</h3>\n    <div class="result-row">\n      <span class="school lang-en">${gWin?'ğŸ† ':''}UT Austin</span>\n      <span class="school lang-ko">${gWin?'ğŸ† ':''}í…ì‚¬ìŠ¤ëŒ€</span>\n      <span class="score">${utG}</span>\n    </div>\n    <div class="result-row">\n      <span class="school lang-en">${!gWin?'ğŸ† ':''}Michigan</span>\n      <span class="school lang-ko">${!gWin?'ğŸ† ':''}ë¯¸ì‹œê°„ëŒ€</span>\n      <span class="score">${umG}</span>\n    </div>\n  </div>\n  \n  <div class="results-box">\n    <h3 class="lang-en">ğŸƒ 10K Run</h3>\n    <h3 class="lang-ko">ğŸƒ 10K ë§ˆë¼í†¤</h3>\n    <div class="result-row">\n      <span class="school lang-en">${rWin?'ğŸ† ':''}Michigan</span>\n      <span class="school lang-ko">${rWin?'ğŸ† ':''}ë¯¸ì‹œê°„ëŒ€</span>\n      <span class="score">${umR}</span>\n    </div>\n    <div class="result-row">\n      <span class="school lang-en">${!rWin?'ğŸ† ':''}UT Austin</span>\n      <span class="school lang-ko">${!rWin?'ğŸ† ':''}í…ì‚¬ìŠ¤ëŒ€</span>\n      <span class="score">${utR}</span>\n    </div>\n  </div>\n  \n  <!-- Participant details -->\n  \n  <!-- Rules -->\n  \n  <p class="lang-en" style="text-align:center;margin-top:2rem;font-style:italic">Over ${tot} alumni participated.${note?' '+note:''}</p>\n  <p class="lang-ko" style="text-align:center;margin-top:2rem;font-style:italic">${tot}ëª… ì´ìƒì˜ ë™ë¬¸ì´ ì°¸ê°€í–ˆìŠµë‹ˆë‹¤.${note?' '+note:''}</p>\n</section>`;
      
      show('resultsCode', c, 'resultsMsg');
    }

    function getData(tId) {
      const rows = document.getElementById(tId).querySelector('tbody').rows;
      const data = [];
      for(let r of rows) {
        const inp = r.querySelectorAll('input');
        if(inp[0].value && inp[1].value && inp[2].value) {
          data.push({name:inp[0].value, school:inp[1].value, score:inp[2].value});
        }
      }
      return data;
    }

    function genPart() {
      const golf = getData('golfTable');
      const run = getData('runTable');
      
      // Sort golf by score (lowest to highest)
      golf.sort((a, b) => parseInt(a.score) - parseInt(b.score));
      
      // Sort run by time (fastest to slowest) - convert mm:ss to seconds for comparison
      run.sort((a, b) => {
        const aTime = a.score.split(':').map(Number);
        const bTime = b.score.split(':').map(Number);
        const aSec = (aTime[0] || 0) * 60 + (aTime[1] || 0);
        const bSec = (bTime[0] || 0) * 60 + (bTime[1] || 0);
        return aSec - bSec;
      });
      
      let c = `  <details style="margin-top:2rem;background:#f9f9f9;padding:1.5rem;border-radius:10px">\n    <summary style="cursor:pointer;font-size:1.2rem;font-weight:bold;color:#bf5700">\n      <span class="lang-en">ğŸ“Š Detailed Results</span>\n      <span class="lang-ko">ğŸ“Š ìƒì„¸ ê²°ê³¼</span>\n    </summary>\n    <div style="margin-top:1.5rem">\n`;
      
      // Golf participants table
      if (golf.length > 0) {
        c += `      <h4 class="lang-en" style="color:#00274c;margin-bottom:1rem">â›³ Golf Participants</h4>\n      <h4 class="lang-ko" style="color:#00274c;margin-bottom:1rem">â›³ ê³¨í”„ ì°¸ê°€ì</h4>\n      <div style="background:white;padding:1rem;border-radius:8px;margin-bottom:2rem">\n        <table style="width:100%;border-collapse:collapse">\n          <thead>\n            <tr style="border-bottom:2px solid #ddd">\n              <th style="text-align:left;padding:0.5rem"><span class="lang-en">Name</span><span class="lang-ko">ì´ë¦„</span></th>\n              <th style="text-align:left;padding:0.5rem"><span class="lang-en">School</span><span class="lang-ko">í•™êµ</span></th>\n              <th style="text-align:right;padding:0.5rem"><span class="lang-en">Score</span><span class="lang-ko">ì ìˆ˜</span></th>\n            </tr>\n          </thead>\n          <tbody>`;
        golf.forEach(p => c += `\n            <tr style="border-bottom:1px solid #eee"><td style="padding:0.5rem">${p.name}</td><td style="padding:0.5rem">${p.school}</td><td style="padding:0.5rem;text-align:right">${p.score}</td></tr>`);
        c += `\n          </tbody>\n        </table>\n      </div>\n`;
      }
      
      // Run participants table
      if (run.length > 0) {
        c += `      <h4 class="lang-en" style="color:#00274c;margin-bottom:1rem">ğŸƒ 10K Run Participants</h4>\n      <h4 class="lang-ko" style="color:#00274c;margin-bottom:1rem">ğŸƒ 10K ë§ˆë¼í†¤ ì°¸ê°€ì</h4>\n      <div style="background:white;padding:1rem;border-radius:8px">\n        <table style="width:100%;border-collapse:collapse">\n          <thead>\n            <tr style="border-bottom:2px solid #ddd">\n              <th style="text-align:left;padding:0.5rem"><span class="lang-en">Name</span><span class="lang-ko">ì´ë¦„</span></th>\n              <th style="text-align:left;padding:0.5rem"><span class="lang-en">School</span><span class="lang-ko">í•™êµ</span></th>\n              <th style="text-align:right;padding:0.5rem"><span class="lang-en">Time</span><span class="lang-ko">ê¸°ë¡</span></th>\n            </tr>\n          </thead>\n          <tbody>`;
        run.forEach(p => c += `\n            <tr style="border-bottom:1px solid #eee"><td style="padding:0.5rem">${p.name}</td><td style="padding:0.5rem">${p.school}</td><td style="padding:0.5rem;text-align:right">${p.score}</td></tr>`);
        c += `\n          </tbody>\n        </table>\n      </div>\n`;
      }
      
      c += `    </div>\n  </details>`;
      
      show('partCode', c, 'partMsg');
    }

    function genRules() {
      const gEn = document.getElementById('golfEn').value;
      const gKo = document.getElementById('golfKo').value;
      const rEn = document.getElementById('runEn').value;
      const rKo = document.getElementById('runKo').value;
      
      let c = `  <details style="margin-top:1rem;background:#f9f9f9;padding:1.5rem;border-radius:10px">\n    <summary style="cursor:pointer;font-size:1.2rem;font-weight:bold;color:#bf5700">\n      <span class="lang-en">ğŸ“‹ Rules</span>\n      <span class="lang-ko">ğŸ“‹ ê·œì¹™</span>\n    </summary>\n    <div style="margin-top:1rem">\n      <h4 class="lang-en">â›³ Golf Rules</h4>\n      <h4 class="lang-ko">â›³ ê³¨í”„ ê·œì¹™</h4>\n      <div class="lang-en" style="background:white;padding:1rem;margin:0.5rem 0;white-space:pre-line">${gEn}</div>\n      <div class="lang-ko" style="background:white;padding:1rem;margin:0.5rem 0;white-space:pre-line">${gKo}</div>\n      <h4 class="lang-en" style="margin-top:1rem">ğŸƒ 10K Rules</h4>\n      <h4 class="lang-ko" style="margin-top:1rem">ğŸƒ 10K ê·œì¹™</h4>\n      <div class="lang-en" style="background:white;padding:1rem;margin:0.5rem 0;white-space:pre-line">${rEn}</div>\n      <div class="lang-ko" style="background:white;padding:1rem;margin:0.5rem 0;white-space:pre-line">${rKo}</div>\n    </div>\n  </details>`;
      
      show('rulesCode', c, 'rulesMsg');
    }

    function genAnn() {
      const en = document.getElementById('annEn').value;
      const ko = document.getElementById('annKo').value;
      const c = `<div class="announcement">\n  <span class="lang-en">${en}</span>\n  <span class="lang-ko">${ko}</span>\n</div>`;
      show('annCode', c, 'annMsg');
    }

    function delRow(btn) {
      const tbody = btn.closest('tbody');
      if(tbody.rows.length > 1) btn.closest('tr').remove();
    }

    function parseCSV(csvId, tId) {
      const csv = document.getElementById(csvId).value.trim();
      if(!csv) { alert('Paste CSV!'); return; }
      const tbody = document.getElementById(tId).querySelector('tbody');
      tbody.innerHTML = '';
      const type = tId === 'golfTable' ? 'number' : 'text';
      csv.split('\n').forEach(line => {
        const p = line.split(',').map(x => x.trim());
        if(p.length >= 3) {
          const r = tbody.insertRow();
          r.innerHTML = `<td><input type="text" value="${p[0]}"></td><td><input type="text" value="${p[1]}"></td><td><input type="${type}" value="${p[2]}"></td><td><button class="btn-sm btn-red" onclick="delRow(this)">Ã—</button></td>`;
        }
      });
      document.getElementById(csvId).value = '';
      alert('Parsed!');
    }

    function show(cId, code, mId) {
      document.getElementById(cId).textContent = code;
      document.getElementById(cId).style.display = 'block';
      const msg = document.getElementById(mId);
      msg.style.display = 'block';
      setTimeout(() => msg.style.display = 'none', 3000);
    }

    function copy(id) {
      const txt = document.getElementById(id).textContent;
      if(!txt) { alert('Generate first!'); return; }
      navigator.clipboard.writeText(txt).then(() => alert('âœ… Copied!'));
    }
  </script>
</body>
</html></parameter>
